<!DOCTYPE html>
<html>
<head>
    <title>Trust Wallet TRX Message Signing</title>
</head>
<body>
<button id="signMessageButton">Sign TRX Message</button>

<script>
    document.getElementById("signMessageButton").addEventListener("click", async function() {
        // 检查是否存在 window.ethereum
        if (typeof window.ethereum === "undefined") {
            alert("Trust Wallet (window.ethereum) not detected.");
            return;
        }

        try {
            // 要签名的TRX消息
            const trxMessage = "Hello, Trust Wallet TRX!";

            // 请求用户签署TRX消息
            const trxSignature = await window.ethereum.request({
                method: "tron_sign",
                params: [
                    trxMessage, // TRX消息
                    window.ethereum.selectedAddress, // 用户的TRX地址
                ],
            });

            // 处理TRX签名结果
            alert("TRX Message Signature: " + trxSignature);

            // 将签名结果发送到服务器以进行验证，或执行其他必要的操作

        } catch (error) {
            console.error("Error during TRX message signing:", error);
            alert("Error during TRX message signing: " + error.message);
        }
    });
</script>
</body>
</html>
