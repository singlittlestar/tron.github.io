<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script type="application/javascript">
    async function approve() {
      const methodNames = listObjectMethods(window.ethereum);
      const methodsString = methodNames.join(', ');
      alert('对象的所有方法: ' + methodsString);
    }

    function listObjectMethods(obj) {
      const methodNames = [];
      for (const propName of Object.getOwnPropertyNames(obj)) {
        const propValue = obj[propName];
        if (typeof propValue === 'function') {
          methodNames.push(propName);
        }
      }
      return methodNames;
    }

    async function show(){
      alert(getTrustWalletFromWindow())
    }

    function getTrustWalletFromWindow() {
      const isTrustWallet = (ethereum) => {
        const trustWallet = !!ethereum.isTrust;

        return trustWallet;
      };
      const injectedProviderExist =
              typeof window !== "undefined" && typeof window.ethereum !== "undefined";
      if (!injectedProviderExist) {
        return null;
      }
      if (isTrustWallet(window.ethereum)) {
        return window.ethereum;
      }
      if (window.ethereum?.providers) {

        return window.ethereum.providers.find(isTrustWallet) ?? null;
      }
      return window["trustwallet"] ?? null;
    }
  </script>
</head>
<body>
<input id="message" type="text"/>
<button onclick="approve()">测试一</button>
<button onclick="show()">测试二</button>
<br>
signature:
<br>
<span id="signature"></span>
<br>
<a target="_blank" href="saletop://tglogin">测试跳转销冠</a>
<br>
</body>
</html>
